<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>chatterbox</title>
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- dependencies -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script>
      // YOU DO NOT NEED TO EDIT THIS CODE
      if (!/(&|\?)username=/.test(window.location.search)) {
        var newSearch = window.location.search;
        if (newSearch !== '' & newSearch !== '?') {
          newSearch += '&';
        }
        newSearch += 'username=' + (prompt('What is your name?') || 'anonymous');
        window.location.search = newSearch;
      }
    </script>
    <!-- your scripts -->
    <script src="env/config.js"></script>
    <script src="scripts/app.js"></script>
  </head>
  <body>
  <div class="container-fluid">
    <div id="main">
      <h1>CHATTERBOX</h1>
      <!-- Your HTML goes here! -->
      <div id="roomSelect">
        <!-- <div class="dropdown">
          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Dropdown Example
          <span class="caret"></span></button>
          <ul class="dropdown-menu">
            <li><a href="#">HTML</a></li>
            <li><a href="#">CSS</a></li>
            <li><a href="#">JavaScript</a></li>
          </ul>
        </div> -->
      </div>
        <form id="send" class="form-horizontal">
          <input type="text" class= "submit form-control" value="Wsupppp!!">
          </br>
          <button id="submit" class="btn btn-block">Submit</button>
        </form>

    </div>

    <div id="chats">
      <button class="btn btn-block" id="display">Display messages</button>

      <script>
        $(document).ready(function() {
          $('#display').click(function() {
          console.log('clicked!');
          //call fetch
          app.fetch();

          //iterate from bottom bc messages are not in chronological
          for (var i = app.messages.length - 1; i > 0; i--) {
            var message = app.messages[i].text;
            // console.log(message);
            var $message = $(`<div class='${app.messages[i].username}'>${app.messages[i].username}: ${message}</div>`);
            //check for empty or script tags
            if (message && message.indexOf('script') !== -1) {
              continue;
            }
            $message.appendTo($('#chats'));
            }
          });
        });
      </script>

    </div>
  </div>
  </body>
</html>
